# Создание системных диаграмм последовательностей

## Прецедент "Войти в игру"
Рисунок 1 - Диаграмма последовательности для прецедента "Войти в игру"

![Рисунок 1 - Диаграмма последовательности для прецедента "Войти в игру"](/images/lab3.p3.png)

| Операция | askName() |
|---|---|
| Ссылки | Прецеденты: Войти в игру |
| Предусловия | Все предыдущие игры завершены |
| Постусловия | Игроку выведен интерфейс для заполнения данных |

| Операция | sayName(name: string) |
|---|---|
| Ссылки | Прецеденты: Войти в игру |
| Предусловия | Текущий игрок еще не зарегестрировался в Игре |
| Постусловия | Создан экземпляр user класса User. Атрибуту user.name присвоено значение name |

| Операция | saveUser() |
|---|---|
| Ссылки | Прецеденты: Войти в игру |
| Предусловия | Текущий игрок ввел свои данные |
| Постусловия | В текущий экземпляр класса Game добавлен текущий игрок |

| Операция | askNextUser() |
|---|---|
| Ссылки | Прецеденты: Войти в игру |
| Предусловия | Текущий игрок сохранен |
| Постусловия | Игроку выведен интерфейс для разрешения на ввод следующего игрока |

| Операция | isLastUser(is_last: bool) |
|---|---|
| Ссылки | Прецеденты: Войти в игру |
| Предусловия | Запрошено разрешение на воод следующего игрока |
| Постусловия | Если is_last == False, Игра готова повторить все предыдущие операции для другого игрока, иначе завершает этот процесс |

| Операция | endNameInput() |
|---|---|
| Ссылки | Прецеденты: Войти в игру |
| Предусловия | Все игроки сохранены |
| Постусловия | Игра переходит к прецеденту "Бросить жребий" |

## Прецедент "Бросить жребий"
Рисунок 2 - Диаграмма последовательности для прецедента "Бросить жребий"

![Рисунок 2 - Диаграмма последовательности для прецедента "Бросить жребий"](/images/lab3.p4.png)

| Операция | castLots(dice: integer) |
|---|---|
| Ссылки | Прецеденты: Бросить жребий |
| Предусловия | Завершен прецедент "Войти в игру" |
| Постусловия | В Игре сохранено полученное игроком значение dice |

| Операция | addUserValue(userID: integer, dice: integer) |
|---|---|
| Ссылки | Прецеденты: Бросить жребий |
| Предусловия | Текущий игрок бросил жребий |
| Постусловия | Атрибуту value экземпляра класса User, атрибут ID которого равен userID, присвоено теущее значение dice |

| Операция | chooseFirsUser() |
|---|---|
| Ссылки | Прецеденты: Бросить жребий |
| Предусловия | У всех игроков заполнен атрибут value |
| Постусловия | Игрок с наименьшим значением атрибута value назначен первым ходящим |

| Операция | goToUserNext() |
|---|---|
| Ссылки | Прецеденты: Бросить жребий |
| Предусловия | Для текущего игрока сохранено значение value |
| Постусловия | Игра готова повторить все предыдущие операции для следующего игрока |

| Операция | orderUsers() |
|---|---|
| Ссылки | Прецеденты: Бросить жребий |
| Предусловия | Выбран первый игрок |
| Постусловия | Между всеми остальными игроками распределены очередности хода |

## Прецедент "Сделать ход"
Рисунок 3 - Диаграмма последовательности для прецедента "Сделать ход"

![Рисунок 3 - Диаграмма последовательности для прецедента "Сделать ход"](/images/lab3.p1.png)

| Операция | rollTheDice(dices: integer[]) |
|---|---|
| Ссылки | Прецеденты: Сделать ход |
| Предусловия | Наступила очередь игрока, он совершил не более 2 бросков |
| Постусловия | Создан экземпляр throw класса Throw. Экземпляр t связан с текущим экземпляром класса Move. Атрибуту throw.dices присвоено значение dices |

| Операция | chooseWinner(userID: integer) |
|---|---|
| Ссылки | Прецеденты: Сделать ход, Узнать свои очки |
| Предусловия | Один из игроков получил комбинацию "Генерал" первым броском или каждый из игроков сделал по 10 ходов |
| Постусловия | Атрибуту winner текущего экземпляра класса Game присвоено значение userID. Игра завершена. |

| Операция | agreeToReroll(agreement: bool) |
|---|---|
| Ссылки | Прецеденты: Сделать ход |
| Предусловия | Текущий игрок совершил 1 или 2 броска за текущий ход |
| Постусловия | Если agreement == False, выводятся все доступные для выбора экземпляры класса Combination. Иначе продолжается модификация текущего экземпляра класса Move. |

| Операция | chooseCombination(combID: integer) |
|---|---|
| Ссылки | Прецеденты: Сделать ход |
| Предусловия | Текущий игрок согласился с результатами своего броска или бросок был третим в текущем ходе |
| Постусловия | Атрибуту comb текущего экземпляра класса Move присвоено значение combID. |

| Операция | saveToTable(userID: integer, combID: integer, combCount: integer) |
|---|---|
| Ссылки | Прецеденты: Сделать ход |
| Предусловия | Текущий игрок выбрал комбинацию для текущего хода |
| Постусловия | Создан экземпляр класса TableCell со следующими аттрибутами: row - combID, column - userID, value - произведение значения combCount и значения атрибута points1 или points2_3 в зависимости от количества экзампляров класса Throw в текущем экземпляре Move |

## Прецедент "Узнать свои очки"
Рисунок 4 - Диаграмма последовательности для прецедента "Узнать свои очки"

![Рисунок 4 - Диаграмма последовательности для прецедента "Узнать свои очки"](/images/lab3.p2.png)

| Операция | getResults() |
|---|---|
| Ссылки | Прецеденты: Узнать свои очки |
| Предусловия | Игра завершена |
| Постусловия | Создан экземпляр класса GameTable |

| Операция | showTable() |
|---|---|
| Ссылки | Прецеденты: Узнать свои очки |
| Предусловия | ИГроками запрошены результаты игры |
| Постусловия | В текущий экземпляр класса GameTable добавляются все экземпляры класса TableCell, созданные за текущюи игру. Для каждого игрока вычисляется сумма его очков. Игроки в результирующей таблице сортируются по сумме очков в порядке убывания. Результирующая таблица выводится игрокам. |
